<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Budget Tracker</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background: #f5f7fa;
      padding: 20px;
      max-width: 700px;
      margin: auto;
      color: #1a1a1a;
    }
    h1 {
      text-align: center;
      font-weight: 700;
      color: #007aff;
      margin-bottom: 20px;
    }
    .balance {
      font-size: 1.8em;
      margin: 20px 0;
      text-align: center;
      font-weight: 600;
      color: #1a1a1a;
    }
    form {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
      justify-content: center;
    }
    input, select, button {
      padding: 12px;
      font-size: 1em;
      border: 1px solid #ccc;
      border-radius: 12px;
      font-weight: 500;
    }
    input:focus, select:focus {
      outline: none;
      border-color: #007aff;
      box-shadow: 0 0 6px rgba(0, 122, 255, 0.4);
    }
    button {
      background: #007aff;
      color: white;
      border: none;
      cursor: pointer;
      font-weight: 600;
      transition: 0.2s;
    }
    button:hover {
      background: #005bb5;
    }
    .transactions {
      background: white;
      border-radius: 16px;
      padding: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      margin-top: 20px;
    }
    .transaction {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 8px 0;
      padding: 10px 12px;
      border-radius: 12px;
      background: #f9f9f9;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      font-weight: 500;
    }
    .transaction span {
      flex: 1;
    }
    .income {
      color: #28a745;
      font-weight: 600;
    }
    .expense {
      color: #d9534f;
      font-weight: 600;
    }
    .delete-btn {
      background: none;
      border: none;
      color: #d9534f;
      font-size: 1.2em;
      cursor: pointer;
      font-weight: bold;
      margin-left: 10px;
    }
    .delete-btn:hover {
      color: #b52b27;
    }
    .chart-container {
      margin-top: 30px;
      background: white;
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <h1>Budget Tracker</h1>
  <div class="balance">Balance: $<span id="balance">0</span></div>

  <form id="transaction-form">
    <input type="date" id="date" required>
    <input type="text" id="desc" placeholder="Description" required>
    <input type="number" id="amount" placeholder="Amount" required>
    <select id="type">
      <option value="income">Income</option>
      <option value="expense">Expense</option>
    </select>
    <button type="submit">Add</button>
  </form>

  <div class="transactions" id="transactions"></div>

  <div class="chart-container">
    <canvas id="budgetChart"></canvas>
  </div>

  <script>
    let transactions = JSON.parse(localStorage.getItem("transactions")) || [];

    const balanceEl = document.getElementById("balance");
    const form = document.getElementById("transaction-form");
    const transactionsEl = document.getElementById("transactions");

    const ctx = document.getElementById("budgetChart").getContext("2d");
    let budgetChart = new Chart(ctx, {
      type: "pie",
      data: {
        labels: ["Income", "Expenses"],
        datasets: [{
          data: [0, 0],
          backgroundColor: ["#28a745", "#d9534f"],
          borderWidth: 0
        }]
      },
      options: {
        plugins: {
          legend: {
            position: "bottom",
            labels: {
              font: { size: 14, weight: "600" }
            }
          }
        }
      }
    });

    function updateUI() {
      transactionsEl.innerHTML = "";
      let balance = 0;
      let incomeTotal = 0;
      let expenseTotal = 0;

      transactions.forEach((t, index) => {
        const div = document.createElement("div");
        div.classList.add("transaction");

        const dateSpan = document.createElement("span");
        dateSpan.textContent = t.date;

        const descSpan = document.createElement("span");
        descSpan.textContent = t.desc;

        const amountSpan = document.createElement("span");
        amountSpan.textContent = (t.type === "income" ? "+" : "-") + "$" + t.amount;
        amountSpan.classList.add(t.type);

        const deleteBtn = document.createElement("button");
        deleteBtn.textContent = "âœ•";
        deleteBtn.classList.add("delete-btn");
        deleteBtn.onclick = () => {
          transactions.splice(index, 1);
          localStorage.setItem("transactions", JSON.stringify(transactions));
          updateUI();
        };

        div.appendChild(dateSpan);
        div.appendChild(descSpan);
        div.appendChild(amountSpan);
        div.appendChild(deleteBtn);
        transactionsEl.appendChild(div);

        if (t.type === "income") {
          balance += t.amount;
          incomeTotal += t.amount;
        } else {
          balance -= t.amount;
          expenseTotal += t.amount;
        }
      });

      balanceEl.textContent = balance.toFixed(2);

      // Update chart
      budgetChart.data.datasets[0].data = [incomeTotal, expenseTotal];
      budgetChart.update();
    }

    form.addEventListener("submit", function(event) {
      event.preventDefault();

      const date = document.getElementById("date").value;
      const desc = document.getElementById("desc").value;
      const amount = parseFloat(document.getElementById("amount").value);
      const type = document.getElementById("type").value;

      const transaction = { date, desc, amount, type };
      transactions.push(transaction);

      localStorage.setItem("transactions", JSON.stringify(transactions));

      updateUI();
      form.reset();
    });

    updateUI();
  </script>
</body>
</html>
